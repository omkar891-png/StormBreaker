{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/attendence/StormBreaker/frontend/app/admin/timetable/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface TimetableEntry {\r\n    id: number;\r\n    class_id: number;\r\n    subject_id: number;\r\n    teacher_id: number;\r\n    day_of_week: string;\r\n    start_time: string;\r\n    end_time: string;\r\n    room_number: string;\r\n}\r\n\r\nconst DAYS = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n\r\nexport default function AdminTimetablePage() {\r\n    const router = useRouter();\r\n    const [timetable, setTimetable] = useState<TimetableEntry[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [selectedClass, setSelectedClass] = useState(1);\r\n    const [formData, setFormData] = useState({\r\n        class_id: 1,\r\n        subject_id: 1,\r\n        teacher_id: 1,\r\n        day_of_week: \"Monday\",\r\n        start_time: \"09:00\",\r\n        end_time: \"10:00\",\r\n        room_number: \"101\",\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [selectedClass]);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n\r\n            if (!token) {\r\n                router.push(\"/auth\");\r\n                return;\r\n            }\r\n\r\n            const res = await fetch(`http://localhost:8000/timetable/class/${selectedClass}`, {\r\n                headers: { Authorization: `Bearer ${token}` },\r\n            });\r\n\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setTimetable(data);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching timetable:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCreateEntry = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const res = await fetch(\"http://localhost:8000/timetable/\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n                body: JSON.stringify(formData),\r\n            });\r\n\r\n            if (res.ok) {\r\n                setShowForm(false);\r\n                fetchData();\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error creating timetable entry:\", error);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: number) => {\r\n        if (!confirm(\"Are you sure you want to delete this entry?\")) return;\r\n\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const res = await fetch(`http://localhost:8000/timetable/${id}`, {\r\n                method: \"DELETE\",\r\n                headers: { Authorization: `Bearer ${token}` },\r\n            });\r\n\r\n            if (res.ok) {\r\n                fetchData();\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error deleting timetable entry:\", error);\r\n        }\r\n    };\r\n\r\n    const getEntriesForDay = (day: string) => {\r\n        return timetable\r\n            .filter((entry) => entry.day_of_week === day)\r\n            .sort((a, b) => a.start_time.localeCompare(b.start_time));\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 to-teal-100 flex items-center justify-center\">\r\n                <div className=\"text-xl text-gray-700\">Loading timetable...</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 to-teal-100 p-8\">\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                <div className=\"mb-8 flex justify-between items-center\">\r\n                    <div>\r\n                        <h1 className=\"text-4xl font-bold text-gray-800 mb-2\">Timetable Management</h1>\r\n                        <p className=\"text-gray-600\">Create and manage class schedules</p>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setShowForm(!showForm)}\r\n                        className=\"px-6 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors font-semibold shadow-lg\"\r\n                    >\r\n                        {showForm ? \"Cancel\" : \"+ Add Entry\"}\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"mb-6 flex gap-3 items-center\">\r\n                    <label className=\"font-semibold text-gray-700\">Select Class:</label>\r\n                    <select\r\n                        className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\r\n                        value={selectedClass}\r\n                        onChange={(e) => setSelectedClass(parseInt(e.target.value))}\r\n                    >\r\n                        {[1, 2, 3, 4, 5].map((id) => (\r\n                            <option key={id} value={id}>\r\n                                Class {id}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n\r\n                {showForm && (\r\n                    <div className=\"bg-white rounded-xl shadow-lg p-6 mb-8\">\r\n                        <h2 className=\"text-2xl font-semibold text-gray-800 mb-4\">Add Timetable Entry</h2>\r\n                        <form onSubmit={handleCreateEntry} className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-3 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Class ID</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        required\r\n                                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\r\n                                        value={formData.class_id}\r\n                                        onChange={(e) => setFormData({ ...formData, class_id: parseInt(e.target.value) })}\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Subject ID</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        required\r\n                                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\r\n                                        value={formData.subject_id}\r\n                                        onChange={(e) => setFormData({ ...formData, subject_id: parseInt(e.target.value) })}\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Teacher ID</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        required\r\n                                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\r\n                                        value={formData.teacher_id}\r\n                                        onChange={(e) => setFormData({ ...formData, teacher_id: parseInt(e.target.value) })}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"grid grid-cols-4 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Day</label>\r\n                                    <select\r\n                                        required\r\n                                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\r\n                                        value={formData.day_of_week}\r\n                                        onChange={(e) => setFormData({ ...formData, day_of_week: e.target.value })}\r\n                                    >\r\n                                        {DAYS.map((day) => (\r\n                                            <option key={day} value={day}>\r\n                                                {day}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Start Time</label>\r\n                                    <input\r\n                                        type=\"time\"\r\n                                        required\r\n                                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\r\n                                        value={formData.start_time}\r\n                                        onChange={(e) => setFormData({ ...formData, start_time: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">End Time</label>\r\n                                    <input\r\n                                        type=\"time\"\r\n                                        required\r\n                                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\r\n                                        value={formData.end_time}\r\n                                        onChange={(e) => setFormData({ ...formData, end_time: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Room</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        required\r\n                                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\r\n                                        value={formData.room_number}\r\n                                        onChange={(e) => setFormData({ ...formData, room_number: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                type=\"submit\"\r\n                                className=\"w-full px-6 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors font-semibold\"\r\n                            >\r\n                                Add Entry\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                )}\r\n\r\n                {timetable.length === 0 ? (\r\n                    <div className=\"bg-white rounded-xl shadow-lg p-12 text-center\">\r\n                        <div className=\"text-6xl mb-4\">ðŸ“…</div>\r\n                        <h2 className=\"text-2xl font-semibold text-gray-700 mb-2\">No Timetable</h2>\r\n                        <p className=\"text-gray-500\">Add entries to create a timetable for this class.</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"grid gap-6\">\r\n                        {DAYS.map((day) => {\r\n                            const entries = getEntriesForDay(day);\r\n\r\n                            return (\r\n                                <div key={day} className=\"bg-white rounded-xl shadow-lg p-6\">\r\n                                    <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">{day}</h2>\r\n\r\n                                    {entries.length === 0 ? (\r\n                                        <p className=\"text-gray-500 text-center py-6\">No classes scheduled</p>\r\n                                    ) : (\r\n                                        <div className=\"space-y-3\">\r\n                                            {entries.map((entry) => (\r\n                                                <div\r\n                                                    key={entry.id}\r\n                                                    className=\"flex items-center justify-between p-4 bg-gradient-to-r from-teal-50 to-emerald-50 rounded-lg\"\r\n                                                >\r\n                                                    <div className=\"flex items-center gap-4\">\r\n                                                        <div className=\"bg-teal-600 text-white px-4 py-2 rounded-lg font-bold text-center min-w-[100px]\">\r\n                                                            <div className=\"text-sm\">{entry.start_time}</div>\r\n                                                            <div className=\"text-xs\">to</div>\r\n                                                            <div className=\"text-sm\">{entry.end_time}</div>\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <h3 className=\"text-lg font-semibold text-gray-800\">\r\n                                                                Subject: {entry.subject_id} | Teacher: {entry.teacher_id}\r\n                                                            </h3>\r\n                                                            <p className=\"text-sm text-gray-600\">Room: {entry.room_number}</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => handleDelete(entry.id)}\r\n                                                        className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-semibold\"\r\n                                                    >\r\n                                                        Delete\r\n                                                    </button>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}